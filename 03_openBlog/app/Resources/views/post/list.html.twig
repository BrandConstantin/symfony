{% extends 'layout.html.twig' %}

{% block title %}Lista de artículos {% endblock %}

{% block content %}
    {% for type,messages in app.session.flashbag.all %}
        {% for message in messages %}
            {% if type == 'success' %}
                <div class="success">{{ message }}</div>
            {% endif %}    
        {% endfor %}
    {% endfor %}

    <h2>Lista de artículos</h2><a href="{{ path('post_new') }}">Añadir nuevo articulo</a>
    {% if is_granted('ROLE_USER') %}
        <a href="{{ path('post_new') }}">Crear Nuevo</a>
    {% endif %}
    <ul>
    {% for post in posts %}
        <li>Articulo ID: {{post.id}}.<a href="{{path('post_view', {'id':post.id})}}">{{post.title}}</a> -> <a href="{{path('post_edit', {'id':post.id})}}">Editar</a></li>
    {% endfor %}
    </ul>
{% endblock %}
